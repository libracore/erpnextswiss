{
 "align_labels_right": 0, 
 "creation": "2018-02-22 09:39:34.662461", 
 "custom_format": 1, 
 "disabled": 0, 
 "doc_type": "Sales Invoice", 
 "docstatus": 0, 
 "doctype": "Print Format", 
 "font": "Default", 
 "html": "<!-- HEAD -->\n<div  id=\"header-html\" class=\"hidden-pdf\" > \n  <div class=\"print-heading\">\n    {% set letter_heads = frappe.get_list('Letter Head', filters={'is_default': '1'}, fields=['name']) %}\n    {% if letter_heads %}\n      {% set letter_head = frappe.get_doc(\"Letter Head\", letter_heads[0].name) %}\n      {% if letter_head %}\n        {{ letter_head.content }}\n      {% else %}\n        <p>No letter head found. Please define a letter head under print settings and mark it as default</p>\n      {% endif %}}\n    {% endif %}\n  </div>\n</div>\n\n<!-- CONTENT -->\n<div id=\"main_content\">\n\t<table style=\"width: 100%;\">\n\t\t<tr>\n\t\t\t<td style=\"width: 66%;\">\n\t\t\t\t{{ doc.customer }}<br>\n\t\t\t\t{{ doc.address_display or '' }}\n\t\t\t</td>\n\t\t\t<td style=\"text-align: left; width: 33%;\">\n\t\t\t\t{{ doc.get_formatted('posting_date') }}\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t{% if doc.contact_person %}\n\t\t\t\t\t{% set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n\t\t\t\t\t{{ contact.first_name or '' }} {{ contact.last_name or '' }}<br>\n\t\t\t\t\t{% if contact.phone %}\n\t\t\t\t\t\t{{ _(\"Tel\") }}: {{ contact.phone }}\n\t\t\t\t\t{% elif contact.mobile_no %}\n\t\t\t\t\t\t{{ _(\"Mobile\") }}: {{ contact.mobile_no }}\n\t\t\t\t\t{% endif %}\n\t\t\t\t{% endif %}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"vertical-align: bottom !important;\">\n\t\t\t\t<strong>{{ _(\"Sales Invoice\") }}: {{ doc.name }}</strong>\n\t\t\t</td>\n\t\t\t<td style=\"vertical-align: bottom !important; text-align: left;\">\n\t\t\t\t{% if doc.items[0].sales_order %}\n\t\t\t\t\t{% set sales_order = frappe.get_doc(\"Sales Order\", doc.items[0].sales_order) %}\n\t\t\t\t\t<strong>{{ _(\"Sales Order\") }}:</strong> {{ sales_order.get_formatted('transaction_date') }}<br>\n\t\t\t\t{% endif %}\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<table style=\"width: 100%\">\n\t\t<tr style=\"border-top: solid black 1px; border-bottom: solid black 1px;\">\n\t\t\t<th style=\"width: 10%\">{{ _(\"Pos\") }}</th>\n\t\t\t<th style=\"width: 30%\">{{ _(\"Description\") }}</th>\n\t\t\t<th style=\"width: 10%\">{{ _(\"Unit\") }}</th>\n\t\t\t<th style=\"width: 10%\">{{ _(\"Qty\") }}</th>\n\t\t\t<th style=\"width: 15%\">{{ _(\"Price\") }}</th>\n\t\t\t<th style=\"width: 15%\">{{ _(\"Amount\") }}</th>\n\t\t</tr>\n\t\t{% for n in doc.items %}\n\t\t\t <tr>\n\t\t\t\t<td>{{ loop.index }}</td>\n\t\t\t\t<td>{{ _(n.item_name) }}<br>\n\t\t\t\t\tArt. Nr. {{ n.item_code }}</td>\n\t\t\t\t<td>{{ _(n.stock_uom) }}</td>\n\t\t\t\t<td>{{ n.qty }}</td>\n\t\t\t\t<td>{{ n.get_formatted('price_list_rate') }}</td>\n\t\t\t\t<td>{{ n.get_formatted('amount') }}</td>\n\t\t\t </tr>\n\t\t {% endfor %}\n\t</table>\n\t<p><br></p>\n\t<table style=\"width: 100%;\">\n\t\t<tr style=\"border-top: solid black 1px; border-bottom: solid black 1px;\">\n\t\t\t<td class=\"Payment_table\"><strong>{{ _(\"Total\") }}</strong></td>\n\t\t\t<td class=\"Payment_table\" style=\"text-align: right;\"><strong>{{ doc.get_formatted('grand_total') }}</strong>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n\n<!-- QR code section -->\n<!-- get receiver details -->\n{% if doc.company_address %}\n  {% set cmp_addr = frappe.get_doc(\"Address\", doc.company_address) %}\n{% endif %}\n{% set company = frappe.get_doc(\"Company\", doc.company) %}\n{% if cmp_addr %}\n  {% set address_array = cmp_addr.address_line1.split(\" \") %}\n  {% set address_line_item_count = address_array | count %}\n  {% set cmp_country = frappe.get_doc(\"Country\", cmp_addr.country) %}\n  {% set cmp_country_code = cmp_country.code | upper %}\n  {% set cmp_address_line_detail = {'name': doc.company, 'street': '', 'number': '', 'pin': cmp_addr.pincode, 'city': cmp_addr.city, 'country': cmp_country_code } %}\n  {% for i in range(0, (address_line_item_count - 1)) %}\n    {% if cmp_address_line_detail.update({'street': cmp_address_line_detail.street + \" \" + address_array[i] }) %}{% endif %}\n  {% endfor %}\n  {% if cmp_address_line_detail.update({'number': address_array[address_line_item_count - 1]}) %}{% endif %}\n\n\n<!-- get payer details -->\n{% if doc.customer_address %}\n  {% set pay_addr = frappe.get_doc(\"Address\", doc.customer_address) %}\n{% endif %}\n{% if pay_addr %}\n  {% set pay_address_array = pay_addr.address_line1.split(\" \") %}\n  {% set pay_address_line_item_count = pay_address_array | count %}\n  {% set pay_country = frappe.get_doc(\"Country\", pay_addr.country) %}\n  {% set pay_country_code = pay_country.code | upper %}\n  {% set pay_address_line_detail = {'name': doc.customer, 'street': '', 'number': '', 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n  {% for i in range(0, (pay_address_line_item_count - 1)) %}\n    {% if pay_address_line_detail.update({'street': pay_address_line_detail.street + \" \" + pay_address_array[i] }) %}{% endif %}\n  {% endfor %}\n  {% if pay_address_line_detail.update({'number': pay_address_array[pay_address_line_item_count - 1]}) %}{% endif %}\n\n\n<table style=\"width: 100%; page-break-inside: avoid !important;\">\n <tr><!-- three columns -->\n  <td style=\"width: 15%;\"><!-- blank left column --></td>\n  <td style=\"width: 40%; border-top: 1px solid silver; border-left: 1px solid silver; border-bottom: 1px solid silver;\"><!-- middle column -->\n   <table>\n    <tr><td>{{ _(\"Zahlteil QR-Rechnung\") }}</td></tr>\n    <tr><td>{{ _(\"Unterst\u00fctzt\") }}<br />{{ _(\"\u00dcberweisung\") }}</td></tr>\n    <tr><td><!-- QR code -->\n   <img src=\"https://data.libracore.ch/phpqrcode/api/iso20022.php?iban={{ company.iban or ''}}&receiver_name={{ cmp_address_line_detail.name }}&receiver_street={{ cmp_address_line_detail.street | trim }}&receiver_number={{ cmp_address_line_detail.number }}&receiver_pincode={{ cmp_address_line_detail.pin }}&receiver_town={{ cmp_address_line_detail.city }}&receiver_country={{ cmp_address_line_detail.country }}&final_receiver_name={{ cmp_address_line_detail.name }}&final_receiver_street={{ cmp_address_line_detail.street | trim }}&final_receiver_number={{ cmp_address_line_detail.number }}&final_receiver_pincode={{ cmp_address_line_detail.pin }}&final_receiver_town={{ cmp_address_line_detail.city }}&final_receiver_country={{ cmp_address_line_detail.country }}&amount={{ doc.grand_total }}&currency={{ doc.currency }}&due_date={{ doc.due_date }}&payer_name={{ pay_address_line_detail.name }}&payer_street={{ pay_address_line_detail.street | trim }}&payer_number={{ pay_address_line_detail.number }}&payer_pincode={{ pay_address_line_detail.pin }}&payer_town={{ pay_address_line_detail.city }}&payer_country={{ pay_address_line_detail.country }}&reference_type=QRR&reference=210000000003139471430009017&message=Auftrag vom 15.09.2019##S1/01/20170309/11/10201409/20/14000000/22/36958/30/CH106017086/40/1020/41/3010\" style=\"width: 46mm; height: 46mm;\" />\n     </td></tr>\n    <tr><td>\n     <table style=\"width: 100%;\">\n      <tr>\n       <td style=\"width: 100%;\">{{ _(\"W\u00e4hrung\") }}</td>\n       <td style=\"width: 100%;\">{{ _(\"Betrag\") }}</td>\n      </tr>\n      <tr>\n       <td>{{ doc.currency }}</td><!-- must be with space as thousand separator and point for decimal -->\n       <td>{{ \"{:,.2f}\".format(doc.grand_total).replace(\",\", \" \") }}</td>\n      </tr>\n     </table>\n    </td></tr>\n   </table>\n  </td>\n\n  <td style=\"width: 45%; border-top: 1px solid silver; border-bottom: 1px solid silver;\"><!-- right column -->\n   <table>\n    <tr><td>{{ _(\"Konto\") }}<br />{{ company.iban or _(\"IBAN not found\") }}</td></tr>\n    <tr><td>{{ _(\"Zahlungsempf\u00e4nger\") }}<br />\n      {{ cmp_address_line_detail.name }}<br />\n      {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\n      {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\n    </td></tr>\n    <tr><td>{{ _(\"Endg\u00fcltiger Zahlungsempf\u00e4nger\") }}<br />\n      {{ cmp_address_line_detail.name }}<br />\n      {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\n      {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\n    </td></tr>\n    <tr><td>{{ _(\"Referenznummer\") }}<br />\n      Reference</td></tr>\n    <tr><td>{{ _(\"Zus\u00e4tzliche Informationen\") }}<br />\n      Nachricht</td></tr>\n    <tr><td>{{ _(\"Zahlungspflichtiger\") }}<br />\n      {{ pay_address_line_detail.name }}<br />\n      {{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\n      {{ pay_address_line_detail.country }}-{{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br />\n    </td></tr>\n    <tr><td>{{ _(\"Zahlbar bis\") }}<br />\n      {{ doc.get_formatted('due_date') }}</td></tr>\n   </table>\n  </td>\n </tr>\n</table>\n\n<!-- control: customer address missing -->\n{% else %}\n<p>{{ _(\"Customer address missing, please add to sales invoice\") }}</p>\n{% endif %}\n\n<!-- control: company address missing -->\n{% else %}\n<p>{{ _(\"Company address missing, please add to sales invoice\") }}</p>\n{% endif %}\n\n\n<!-- FOOTER -->\n<div id=\"footer-html\" class=\"visible-pdf\">\n      {% if letter_head %}\n        {{ letter_head.footer}}\n      {% else %}\n        <p>No letter head found. Please define a letter head under print settings and mark it as default</p>\n      {% endif %}}\n</div>", 
 "idx": 0, 
 "line_breaks": 0, 
 "modified": "2018-02-22 12:36:03.675404", 
 "modified_by": "Administrator", 
 "module": "ERPNextSwiss", 
 "name": "QR Sales Invoice", 
 "owner": "Administrator", 
 "print_format_builder": 0, 
 "print_format_type": "Server", 
 "show_section_headings": 0, 
 "standard": "Yes"
}